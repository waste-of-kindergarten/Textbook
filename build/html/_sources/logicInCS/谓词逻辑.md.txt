# 谓词逻辑

***谓词逻辑(predicate logic)*** 也被称为 ***一阶逻辑(first-order logic)***，相比命题逻辑更具有表现力。在谓词逻辑中，仍然满足可靠性和完备性。

## 谓词逻辑作为形式语言

在谓词逻辑公式中，有两个重要的概念。首先，谓词逻辑中包含了对象，这些对象由变量符号表示，或者也可以通过函数符号来表示。在谓词逻辑中，用来表示对象的表达式均称为 ***项(terms)***；另外一个概念与真值相关，用来表示真值的表达式被称为 ***公式(formulas)***。

谓词逻辑词汇均由三个集合组成：谓词符号集合` $\mathcal{P}$ `、函数符号集合` $\mathcal{F}$ `以及常数符号集合` $\mathcal{C}$ `。

> 注意： 常数符号可以看作零元函数，即特殊的函数；因此接下来我们抛弃常数符号集合，而使用函数符号集合作为函数和常数的集合

### 项

项的定义如下：

- 任何的变量都是项

- 如果` $c \in \mathcal{F}$ `是一个零元函数，那么` $c$ `是一个项

- 如果` $t\_1,t\_2,\dots,t\_n$ `是项，并且` $f \in \mathcal{F}$ `有变元` $n > 0$ `，那么` $f(t\_1,t\_2,\dots,t\_n)$ `是一个项

- 除此之外均不是项

使用BNF形式记为：

```math
t ::= \ x \ | \ c \ | \ f(t,\dots,t)
```

其中` $x$ `在一个变量集合` $var$ `上取值，` $c$ `在` $\mathcal{F}$ `中零元函数符号中取值，` $f$ `在非零元函数符号中取值。

### 公式

我们递归地在` $(\mathcal{F},\mathcal{P})$ `上定义公式的集合，并使用基于` $\mathcal{F}$ `定义的项：

- 如果 ` $P \in \mathcal{P}$ `是一个变元` $n \ge 1$ `的谓词符号，且如果` $t\_1,t\_2,\dots,t\_n$ `是定义在` $\mathcal{F}$ `上的项，那么` $P(t\_1,t\_2,\dots,t\_n)$ `是一个公式。

- 如果` $\phi$ `是一个公式，那么` $\neg \phi$ `也是公式。

- 如果` $\phi$ `和` $\psi$ `是公式，那么` $(\phi \wedge \psi)$ `，` $(\phi \vee \psi)$ `和` $(\phi \rightarrow \psi)$ `也是公式。

- 如果` $\phi$ `是一个公式且` $x$ `是一个变量，那么` $(\forall x \ \phi)$ `和` $(\exists x \ \phi)$ `也是公式。

- 除此之外均不是公式

```math
\phi ::= P(t_1,t_2,\dots,t_n) \ | \ (\neg \phi) \ | \ (\phi \wedge \phi) \ | \ (\phi \vee \phi) \ | \ (\phi \rightarrow \phi) \ | \ (\forall x \ \phi) \ | \ (\exists x \ \phi)    
```

其中` $P \in \mathcal{P}$ `是变元数量` $n \ge 1$ `的谓词符号，` $t_i$ `是` $\mathcal{F}$ `上的项，` $x$ `是一个变量。

> 提示：谓词逻辑并不包含变元为0的谓词，变元为0的谓词弱化为了命题逻辑

习惯上，` $\neg,\forall y, \exists y $ `结合最紧密，` $\wedge, \vee$ `次之，` $\rightarrow$ `结合性最弱且是右结合的。

### 自由变量和约束变量

令` $\phi$ `作为谓词逻辑中的公式。如果在` $\phi$ `的解析树中，存在一个叶结点` $x$ `，其向上的路径中没有通向` $\forall x$ `或者` $\exists x$ `，则称` $x$ `为 ***自由变量(free variables)*** ；否则，称` $x$ `为 ***约束变量(bound variables)*** 。一个变量` $x$ `是约束变量当且仅当，它位于某个` $\forall x$ `或` $\exists x$ `的 ***作用域(scope)*** 中。

一个量词的作用域是它的子树减去任何重新引入该量词的子树。例如` $\forall x (O(x) \rightarrow \exists x Q(x))$ `的作用域是` $P(x)$ `。

### 替换

变量作为占位符必须引入替换的概念。

给定一个变量` $x$ `，一个项` $t$ `和一个公式` $\phi$ `,我们定义` $\phi[t/x]$ `为将每个` $\phi$ `中的每个出现的自由的` $x$ `替换为` $t$ `后的公式。

<center>

![](/_static/image/substitution.png)

</center>

然而，这样替换可能造成麻烦，如果一个项` $t$ `中含有其他的变量` $y$ `，而变量在被替换的公式中是约束变量，则会导致公式的实质发生改变。

如果对于` $t$ `中的任何变量` $y$ `，所有待替换的自由的` $x$ `均不在` $\forall y、\exists y$ `的作用域中，则称` $t$ `对于` $\phi$ `中的` $x$ `是自由的。 

> 注意：因此，在进行替换时，应当检查是否满足上述条件

<center>

![](/_static/image/substitution_not_free.png)

</center>

## 谓词逻辑的证明理论

### 自然演绎规则

**相等性证明规则** 

```math
\frac{}{t=t}=_i
```

```math
\frac{t_1=t_2 \ \ \ \phi[t_1/x]}{\phi[t_2/x]}=_e
```

相等性的证明规则强制了自反性，对称性和传递性。对于自反性，由` $=_i$ `给出，对于对称性，证明如下：

```math
\begin{align}
&1 & \ \ \ t_1 = t_2  & \ \ \ premise \\
&2 & \ \ \ t_1 = t_1 &  \ \ \ =_i \\
&3 & \ \ \ t_2 = t_1  & \ \ \ =_e 1,2
\end{align}
```

对于传递性：

```math
\begin{align}
&1 & \ \ \ t_1 = t_2 & \ \ \ premise \\
&2 & \ \ \ t_2 = t_3 & \ \ \ premise \\ 
&3 & \ \ \ t_1 = t_3 & \ \ \ =_e 2,1
\end{align}
```
