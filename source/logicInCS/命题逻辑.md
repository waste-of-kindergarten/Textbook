# 命题逻辑

## 声明语句

***命题逻辑(propositional logic)*** 是一种基于命题（可判断真假的陈述语句）的逻辑。命题逻辑将自然的陈述语句转化为字符串和符号，一方面我们能够在保持陈述语句编码完整性，另一方面我们将陈述语句进行了压缩以便专注于逻辑推断机制。

考虑某些 ***原子的(atomic)*** 陈述语句（或者说不可分解的），例如:

<center> 
“数字5是奇数”
</center>

<br>

我们为每一个语句分配唯一的符号 ` $ p,q,r, \dots $ `，这样就可以按组合的方式构造更加复杂的语句。

为了构造更复杂的语句，需要一些构造规则：

` $\neg$ `: ` $p$ `的 ***否定(negation)*** 是` $\neg p$ `

` $\vee$ ` : 给定` $p$ `和` $q$ `两个语句，我们使用` $p \vee q$ `表示它们“至少有一个为真”，并称之为 ***析取(disjunction)***

` $\wedge$ ` : 给定` $p$ `和` $q$ `两个语句，我们使用` $p \wedge q $ `表示“它们均为真”，并称之为 ***合取(conjunction)***

` $\rightarrow$ ` : 给定` $p$ `和` $q$ `两个语句，我们使用` $p \rightarrow q$ `表示 “当` $p$ `为真时` $q$ `也为真”，并称其中的` $p$ `为 ***假设(assumption)***、` $q$ `为结论，并称语句` $p \rightarrow q$ `为 ***蕴含(implication)***。

> 惯例： 习惯上，结合性优先级 ` $ \  \neg \ $` > ` $\ \wedge \ $` > ` $\ \vee \ $ ` > ` $\ \rightarrow \ $`，且` $\rightarrow$ `为右结合的。

## 自然演绎

我们需要一些规则以便能够从给定的一系列前提中推导出结论，在自然演绎中，我们称这些规则为 ***证明规则(proof rules)***。

假设我们有一系列称为 ***前提(premises)*** 的公式` $\phi_1,\phi_2,\dots,\phi_n$ `，以及另外一个称为 ***结论(conclusion)*** 的公式` $\psi$ `，通过对前提使用一系列的证明规则最终可以得到结论，我们将这个含义表示为

```math
  \phi_1,\phi_2,\dots,\phi_n \vdash \psi
```

并称之为 ***相继式(sequent)***。 如果我们可以找到它的一个证明，那么称之为 ***有效的(valid)*** 。

### 自然演绎规则

**合取规则**

- “与”引入规则（and-introduction）

```math
\frac{\phi \ \ \ \psi}{\phi \wedge \psi} \wedge_i
```

- “与”消去规则（and-elimination）

```math
\frac{\phi \wedge \psi}{\phi} \wedge_{e_1} \ \ \ \ \frac{\phi \wedge \psi}{\psi} \wedge_{e_2}
```

**双重否定规则**

- “双重否定”引入规则 (double-negation-introduction)

```math
\frac{\neg \neg \psi}{\psi} \neg\neg_e
```

- “双重否定”消去规则（double-negation-elimination）

```math
\frac{\phi}{\neg \neg \phi} \neg\neg_i
```

**蕴含规则**

- “蕴含”消去规则（implies-elimination）

```math
\frac{\phi \ \ \ \phi \rightarrow \psi}{\psi} \rightarrow_e
```

- MT规则（modus tollens）

```math
\frac{\phi \rightarrow \psi \ \ \ \neg \psi}{\neg \phi} MT
```

- “蕴含”引入规则（implies-introduction）

```math
\frac{\boxed{\begin{align} & \phi \\ & \vdots \\ & \psi \end{align}}}{\phi \rightarrow \psi} \rightarrow_i
```

这里与其他的规则不同的是，使用了一个方框标志，它表示暂时假设` $\phi$ `成立可以证明` $\psi$ `成立。

> 注意： 
> 1. 方框内外推导并无本质差别
> 2. 当处于方框中时，可以使用方框内上方以及方框外部的前提推导新的结论
> 3. 方框结束后，不能随意使用方框内的结论（因为其存在特定的假设），除非有演绎规则的支持


**析取规则**

- “析取”引入规则（or-introduction）

```math
\frac{\phi}{\phi \vee \psi} \vee_{i_1} \ \ \ \ \frac{\psi}{\phi \vee \psi} \vee_{i_2}
```

- “析取”消去规则（or-elimination）

```math
\frac{\phi \vee \psi \ \ \boxed{\begin{align} & \phi \\ & \vdots \\ & \chi \end{align}} \ \ \boxed{\begin{align} & \psi \\ & \vdots \\ & \chi \end{align}}}{\chi} \vee_e
```

**否定规则**

- “否定”消去规则（not-elimination）

```math
\frac{\phi \ \ \neg \phi}{\bot} \neg_e
```

- “否定”引入规则（not-introduction）

```math
\frac{\boxed{\begin{align} & \phi \\ & \vdots \\ & \bot \end{align}}}{\neg \phi} \neg_i
```

**矛盾律**

- 矛盾消去规则（bottom-elimination）

```math
\frac{\bot}{\phi}\bot_e
```

**反证法**

- 反证法（proof by contradiction, PBC）

```math
\frac{\boxed{\begin{align} & \neg \phi \\ & \vdots \\ & \bot \end{align}}}{\phi} PBC
```

**排中律**

- 排中律（law of the excluded middle, LEM）

```math
\frac{}{\phi \vee \neg \phi} LEM
```

### 树状表示法与线性表示法

在自然演绎规则一节中，我们使用树状表示法进行表示；但对于长推导来说，使用树状表示推导过程会导致一些书写麻烦，一种替代方法是使用 ***线性表示(linear presentation)***。我们将在下面进行展示。

### 派生的规则

在所有的自然演绎规则中，某些规则并不“基本”，它们可以使用基本的规则派生出来。接下来我们使用线性表示法进行推导。

- MT

```math
\begin{align}
& 1 & \ \ \ & \phi \rightarrow \psi \ \ \ & premise \\ 
& 2 & \ \ \ & \neg \psi \ \ \ & premise \\
& 3 & \mid \ \ & \phi \ \ \ & assumption \\ 
& 4 & \mid \ \ & \psi \ \ \ & \rightarrow_e 1,3 \\
& 5 & \mid \ \ & \bot \ \ \ & \neg_e 4,2 \\
& 6 &  \ \ \ & \neg \phi \ \ \ & \neg_i 3-5   
\end{align}
```

- ` $\neg \neg_i$ `

```math
\begin{align}
& 1 & \ \ \ & \phi \ \ \ & premise \\
& 2 & \mid \ \ & \neg \phi \ \ \ & assumption \\
& 3 & \mid \ \ & \bot \ \ \ & \neg_e 1,2 \\
& 4 & \ \ \ & \neg \neg \phi  \ \ \ & \neg_i 2-3 
\end{align}
```

- PBC

```math
\begin{align}
& 1 & \ \ \ & \neg \phi \rightarrow \bot \ \ \ & given \\ 
& 2 & \mid \ \ & \neg \phi \ \ \ & assumption \\ 
& 3 & \mid \ \ & \bot \ \ \ & \rightarrow_e 1,2 \\
& 4 & \ \ \ & \neg \neg \phi \ \ \ & \neg_i 2-3 \\ 
& 5 & \ \ \ & \phi \ \ \ & \neg \neg_e 4
\end{align}
```

- LEM

```math
\begin{align}
& 1 & \mid \ \ \ &  \neg (\phi \vee \neg \phi) \ \ \ & assumption \\ 
& 2 & \mid \mid \ \ & \phi \ \ \ & assumption \\ 
& 3 & \mid \mid \ \ & \phi \vee \neg \phi \ \ \ & \vee_{i_1} 2 \\ 
& 4 & \mid \mid \ \ & \bot \ \ \ & \neg_e 3,1 \\
& 5 & \mid \ \ \ & \neg \phi & \neg_i 2-4 \\
& 6 & \mid \ \ \ & \phi \vee \neg \phi & \vee_{i_2} 5 \\
& 7 & \mid \ \ \ & \bot \ \ \ & \neg_e 6,1 \\
& 8 & \ \ \ \ & \neg \neg (\phi \vee \neg \phi) \ \ \ & \neg_i 1-7 \\
& 9 & \ \ \ \ & \phi \vee \neg \phi \ \ \ & \neg \neg_e 8
\end{align}
```

### 可证等价

令` $\phi$ `和` $\psi$ `为命题逻辑中的公式，我们称它们可证等价当且仅当两个相继式` $\phi \vdash \psi$ `和` $\psi \vdash \phi$ `都是有效的(valid)。对于这种双向的可证，我们也可以简写为` $\phi \dashv \vdash \psi$ `。

### 经典逻辑与直觉逻辑

在经典逻辑中，逻辑学家承认反证法、排中律、“双重否定”消去律；但另一种直觉注意逻辑中，逻辑学家认为这些规则并没有直接证明，即缺少构造性。

对于反证法，直觉主义认为为了证明` $\phi$ `，我们需要直接证明，而不是证明` $\neg \phi$ `是不可能的；对于排中律，必须证明 ` $\phi$ `或者` $\neg \phi$ `成立，如果都不能证明，那么则不能承认排中律；另外，直觉主义逻辑拒绝接受双重否定消去律因为我们使用其作用于其他接受的规则上（因此接受双重否定消去律意味着接受PBC和LEM）。

## 形式语言下的命题逻辑

我们必须明确，对于我们声明的规则来说，只要我们构造的公式满足规则的要求，它就应该是有效的。

我们必须定义 **良形式(well-formed)** 的公式，以保证其具有意义。命题逻辑中的良形式公式当且仅当通过有限次以下规则才能得到：

- *原子(atom)*: 每个命题原子` $p,q,r, ...$ `和` $p_1,p_2, ...$ `是良形式的公式

- *` $\neg$ `*: 如果` $\phi$ `是良形式的公式，那么` $\neg \phi$ `也是

- *` $\wedge$ `*: 如果` $\phi$ `和` $\psi$ `是良形式的公式，那么` $\phi \wedge \psi$ `也是

- *` $\vee$ `*: 如果` $\phi$ `和` $\psi$ `是良形式的公式，那么` $\phi \vee \psi$ `也是

- *` $\rightarrow$ `*: 如果` $\phi$ `和` $\psi$ `是良形式的公式，那么` $\phi \rightarrow \psi$ `也是

以上规则也可以以 ***BNF语法(Backus Naur form)*** 定义:

```math
\phi ::= p \ | \ (\neg \phi) \ | \ (\phi \wedge \phi) \ | \ (\phi \vee \phi) \ | \ (\phi \rightarrow \phi)
```

## 命题逻辑的语义

### 逻辑连接词的含义

在现实世界中，我们往往关注某个陈述的“真假” -- 即真值。真值集合中包含两个元素 **T** 和 **F**，分别代表“真”和“假”。

在对于一个公式而言，它要么是原子的，要么是由其他公式通过逻辑连接词构造而成。对于前者，我们通过现实世界来赋予其真值；对于后者，一旦我们得到其中全部原子的真值，就可以通过逻辑连接词计算出它的真值，可以将逻辑连接词视为函数，根据参数的真值得到对应的真值结果。

- ` $\wedge$ `

```math
\begin{align}
&\phi   &\psi  &\ \ \ \ \phi \wedge \psi \\
&T  &T &\ \ \ \ \ \ \ T \\
&T  &F &\ \ \ \ \ \ \ F \\
&F  &T  &\ \ \ \ \ \ \ F \\
&F  &F  &\ \ \ \ \ \ \ F 
\end{align}
```

- ` $\vee$ `

```math
\begin{align}
&\phi   &\psi  &\ \ \ \ \phi \vee \psi \\
&T  &T &\ \ \ \ \ \ \ T \\
&T  &F &\ \ \ \ \ \ \ T \\
&F  &T  &\ \ \ \ \ \ \ T \\
&F  &F  &\ \ \ \ \ \ \ F 
\end{align}
```

- ` $\rightarrow$ `

```math
\begin{align}
&\phi   &\psi  &\ \ \ \ \phi \rightarrow \psi \\
&T  &T &\ \ \ \ \ \ \ T \\
&T  &F &\ \ \ \ \ \ \ F \\
&F  &T  &\ \ \ \ \ \ \ T \\
&F  &F  &\ \ \ \ \ \ \ T 
\end{align}
```

- ` $\neg$ `

```math
\begin{align}
&\phi & \neg \phi \\
& T & F \\
& F & T
\end{align}
```

- ` $\top$ `

```math
\begin{align}
& \top \\
& T 
\end{align}
```

- ` $\bot$ `

```math
\begin{align}
& \bot \\
& F
\end{align}
```

给一个公式` $\phi$ `中每一个命题的原子分配一个真值，这个过程被称为一个 ***赋值(valuation)*** 或者 ***模型(model)***。



在此之前为了判断一个相继式是否有效，我们需要寻找一个证明来验证。但在真实世界中，我们会关注公式的“真假”。为了便于区分，我们定义前提于结论的另一种关系：

```math
\phi_1, \phi_2, \dots,\phi_n \models \psi
```

我们称` $\models$ `为 ***语义蕴含(semantic entailment)*** 关系，这表明当前提全部为真时，结论也为真。

### 数学归纳法

数学归纳法内容如下：

- ***基础情形(Base case)*** ： 自然数1拥有性质` $M$ `，记为` $M(1)$ `

- ***归纳步骤(Inductive step)*** ： 如果`n`是一个自然数，当我们假定其具有性质` $M(n)$ `,那么我们可以得出` $ n + 1$ `拥有性质` $M( n + 1)$ `

当以上两条信息满足，则每个自然数都满足性质` $M(n)$ `， 在归纳步骤中的假设` $M(n)$ `被称为 ***(I)归纳假设(induction hypothesis)*** .

另外数学归纳法拥有一个变种，该变种将归纳步骤中的归纳假设改为` $M(1) \wedge M(2) \wedge \dots \wedge M(n)$ `，并取消了基础情形。

> 提示： 取消了基础情形是因为`M(1)`的证明已经包含在了归纳步骤中

### 命题逻辑的可靠性

给出一个` $\phi_1, \phi_2, \dots , \phi_n \vdash \psi$ `的证明，是否存在当` $\psi$ `为假时，所有的前提` $\phi_1,\phi_2, \dots , \phi_n $ `仍然为真？即命题逻辑是否具有 ***可靠性(soundness)*** ？事实是肯定的，令` $\phi_1, \phi_2, \dots , \phi_n$ ` 和 ` $\psi$ ` 为命题逻辑公式。如果` $\phi_1, \phi_2, \dots , \phi_n \vdash \psi$ `是有效的，则` $\phi_1, \phi_2, \dots , \phi_n \models \psi$ `成立。

### 命题逻辑的完备性

当` $\phi_1,\phi_2,\dots,\phi_n \models \psi$ `成立，则存在一个相继式 ` $\phi_1,\phi_2,\dots,\phi_n \vdash \psi$ ` 的自然归纳的证明。

## 范式

本节讨论检验语义蕴含成立的（除定义外）其他替代性方法。

### 语义等价性、可满足性和有效性

令` $\phi$ `和` $\psi$ `为命题逻辑公式，我们称它们 ***语义等价(semantically equivalent)*** 当且仅当 ` $\phi \models \psi$ `且` $\psi \models \phi$ `均成立，此时可以写作` $\phi \equiv \psi$ `。特别地，如果` $\models \phi$ `，我们称` $\phi$ `为 ***有效的(valid)***。

实际上，由于可靠性和完备性，语义等价和 ***可证等价(provable equivalence)*** 是一致的。


**[引理]** &nbsp; 给定命题逻辑公式` $\phi_1,\phi_2,\dots,\phi_n$ ` 和` $\psi$ `， 
则` $ \phi_1,\phi_2,\dots,\phi_n \models \psi $ `成立当且仅当` $\models \phi_1 \rightarrow (\phi_2 \rightarrow \dots \rightarrow (\phi_n \rightarrow \psi))$ `成立

下面介绍 ***合取范式(conjunctive normal form，CNF)***: 一个文字` $L$ `要么为一个原子` $p$ `要么为一个原子的否定` $\neg p$ `，一个公式` $C$ `是一个合取范式如果其是若干 ***子句(clauses)*** 组成，其中子句是若干文字的析取。

```math
\begin{align}
& L ::= &p \ \ \ |\ \ \ &\neg p  \\
& D ::= &L \ \ \ |\ \ \ &L \vee D \\
& C ::= &D \ \ \ |\ \ \ &D \wedge C 
\end{align}
```

**[引理]** &nbsp; 一组文字的合取 ` $L_1 \vee L_2 \vee \dots \vee L_m$ `是有效的当且仅当存在` $1 \le i,j \le m$ `使得` $L_i$ `是` $\neg L_j$ `

给定一个命题逻辑公式` $\phi$ `，我们称` $\phi$ `是 ***可满足的(satisfiable)*** ，如果它的一个赋值可以使其为真。另外当` $\phi$ `为可满足的，则` $\neg \phi$ `不是有效的。

如何计算合取范式？一种特殊的场景是，当我们已经拥有了真值表，那么我们可以根据真值表快速写出合取范式。

例如：

```math
\begin{align}
 p \ \ \ q \ \ \  r  & \ \ \ \phi \\
 T \ \ \ T  \ \ \ T  & \ \ \ T \\
 T \ \ \ T \ \ \ F & \ \ \ F \\ 
 T \ \ \ F \ \ \ T & \ \ \ T \\ 
 T \ \ \ F \ \ \ F & \ \ \ T \\
 F \ \ \ T \ \ \ T & \ \ \ F \\ 
 F \ \ \ T \ \ \ F & \ \ \ F \\ 
 F \ \ \ F \ \ \ T & \ \ \ F \\ 
 F \ \ \ F \ \ \ F & \ \ \ T 
\end{align}
```

我们将所有导致` $\phi$ `为` $F$ `的赋值（行）全部其出来，组成一个子句，以便其能够为` $F$ `（进一步地，当且仅当此时为假）。

```math
\begin{align}
& \phi_1 = \neg p \vee \neg q \vee r \\
& \phi_2 = p \vee \neg q \vee \neg r \\
& \phi_3 = p \vee \neg q \vee r \\ 
& \phi_4 = p \vee q \vee \neg r 
\end{align}
```

我们将这些子句合取，组成合取范式；此时，当且仅当赋值为真值表中使` $\phi$ `为假的情况，才能使合取范式为假，其余情况为真，这与真值表是完全一致的，因此该合取范式与` $\phi$ `等价，即为` $\phi$ `的合取范式。
